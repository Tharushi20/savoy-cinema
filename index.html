<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAVOY Cinema</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script>
        $(document).ready(function() {
            $.getJSON("fetch_movies.php", function(data) {
                console.log(data); // Debugging line

                let nowShowing = '';
                let comingSoon = '';
                
                data.forEach(function(movie) {
                    let movieCard = `
                        <div class="col-md-4">
                            <div class="movie-card">
                                <img src="images/${movie.image}" alt="${movie.title}" class="img-fluid">
                                <h3>${movie.title}</h3>
                                <div class="movie-buttons">
                                    <button class="btn btn-warning" onclick="location.href='tickets.html'">Buy Tickets</button>
                                    <button class="btn btn-secondary">Watch Trailer</button>
                                </div>
                            </div>
                        </div>
                    `;

                    if (movie.showing_status === 'now_showing') {
                        nowShowing += movieCard;
                    } else if (movie.showing_status === 'coming_soon') {
                        comingSoon += movieCard;
                    }
                });

                $('#nowShowing').html(nowShowing);
                $('#comingSoon').html(comingSoon);
            }).fail(function(jqXHR, textStatus, errorThrown) {
                console.error("Failed to fetch data from fetch_movies.php: ", textStatus, errorThrown);
            });
        });
    </script>
</head>
<body>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <a class="navbar-brand" href="#">SAVOY</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="tickets.html">Buy Tickets</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="movies.html">Movies</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="cinema.html">Cinemas</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contact.html">Contact Us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="login.html">Login</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Movie Carousel -->
    <div id="movieCarousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="images/movie1.jpg" class="d-block w-100" alt="Movie 1">
                <div class="carousel-caption d-none d-md-block">
                    <div class="carousel-content">
                        <img src="images/movie1-small.jpg" alt="Movie 1 Small" class="carousel-small-image">
                        <div class="carousel-description">
                            <h3>The Garfield Movie (3D)</h3>
                            <p>Garfield, the world-famous, Monday-hating, lasagna-loving indoor cat, is about to have a wild outdoor adventure! After an unexpected reunion with his long-lost father – scruffy street cat Vic – Garfield and his canine friend Odie are forced from their perfectly pampered life into joining Vic in a hilarious, high-stakes heist.</p>
                            <div class="genres">
                                <span class="badge badge-light">Animation</span>
                                <span class="badge badge-light">Comedy</span>
                                <span class="badge badge-light">Family</span>
                            </div>
                            <p>R . 2h 30m</p>
                            <div class="movie-detail-slide-styled__CinemaDetailContentStyled-sc-1it8vly-2 CgBVX">
                                <div class="cinema-detail-outer-wrapper">
                                    <div class="cinema-detail-wrapper">
                                        <p class="bold">Now showing at SAVOY Theatre - C2</p>
                                        <ul>
                                            <li>Dolby Atmos 4K Digital Project</li>
                                        </ul>
                                    </div>
                                    <div class="flex items-center buy-btn">
                                        <button class="btn btn-warning" onclick="location.href='tickets.html'">Buy Tickets</button>

                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <img src="images/movie2.jpg" class="d-block w-100" alt="Movie 2">
                <div class="carousel-caption d-none d-md-block">
                    <div class="carousel-content">
                        <img src="images/movie2-small.jpg" alt="Movie 2 Small" class="carousel-small-image">
                        <div class="carousel-description">
                            <h3>Despicable Me 4 (3D)</h3>
                            <p>Gru and Lucy and their girls — Margo, Edith and Agnes — welcome a new member to the Gru family, Gru Jr., who is intent on tormenting his dad. Gru faces a new nemesis in Maxime Le Mal and his femme fatale girlfriend Valentina, and the family is forced to go on the run.</p>
                            <div class="genres">
                                <span class="badge badge-light">Animation</span>
                                <span class="badge badge-light">Comedy</span>
                                <span class="badge badge-light">Family</span>
                                <span class="badge badge-light">Action</span>
                                
                            </div>
                            <p>PG . 2h 15m</p>
                            <div class="movie-detail-slide-styled__CinemaDetailContentStyled-sc-1it8vly-2 CgBVX">
                                <div class="cinema-detail-outer-wrapper">
                                    <div class="cinema-detail-wrapper">
                                        <p class="bold">Now showing at SAVOY Theatre - C2</p>
                                        <ul>
                                            <li>Dolby Atmos 4K Digital Project</li>
                                        </ul>
                                    </div>
                                    <div class="flex items-center buy-btn">
                                        <button class="btn btn-warning" onclick="location.href='tickets.html'">Buy Tickets</button>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <img src="images/movie3.jpg" class="d-block w-100" alt="Movie 3">
                <div class="carousel-caption d-none d-md-block">
                    <div class="carousel-content">
                        <img src="images/movie3-small.jpg" alt="Movie 3 Small" class="carousel-small-image">
                        <div class="carousel-description">
                            <h3>Longlegs</h3>
                            <p>***RATED R*** | In pursuit of a serial killer, an FBI agent uncovers a series of occult clues that she must solve to end his terrifying killing spree.</p>
                            <div class="genres">
                                <span class="badge badge-light">Crime</span>
                                <span class="badge badge-light">Horror</span>
                                <span class="badge badge-light">Mystery</span>
                            </div>
                            <p>R . 2h 45m</p>
                            <!-- <div class="now-showing-box">
                                <span>Now showing at SAVOY Theatre - C2 Dolby Atmos 4K Digital Project</span>
                                <button class="btn btn-warning">Buy Tickets</button>
                            </div> -->
                            <div class="movie-detail-slide-styled__CinemaDetailContentStyled-sc-1it8vly-2 CgBVX">
                                <div class="cinema-detail-outer-wrapper">
                                    <div class="cinema-detail-wrapper">
                                        <p class="bold">Now showing at SAVOY Theatre - C2</p>
                                        <ul>
                                            <li>Dolby Atmos 4K Digital Project</li>
                                        </ul>
                                    </div>
                                    <div class="flex items-center buy-btn">
                                        <button class="btn btn-warning" onclick="location.href='tickets.html'">Buy Tickets</button>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="carousel-item">
                <img src="images/movie4.jpg" class="d-block w-100" alt="Movie 4">
                <div class="carousel-caption d-none d-md-block">
                    <div class="carousel-content">
                        <img src="images/movie4-small.jpg" alt="Movie 4 Small" class="carousel-small-image">
                        <div class="carousel-description">
                            <h3>A Quiet Place: Day One</h3>
                            <p>As New York City is invaded by alien creatures who hunt by sound, a woman named Sammy fights to survive.</p>
                            <div class="genres">
                                <span class="badge badge-light">Horror</span>
                                <span class="badge badge-light">Sci-fi</span>
                                <span class="badge badge-light">Thriller</span>
                            </div>
                            <p>PG . 2h 15m</p>
                            <!-- <div class="now-showing-box">
                                <span>Now showing at SAVOY Theatre - C2 Dolby Atmos 4K Digital Project</span>
                                <button class="btn btn-warning">Buy Tickets</button>
                            </div> -->
                            <div class="movie-detail-slide-styled__CinemaDetailContentStyled-sc-1it8vly-2 CgBVX">
                                <div class="cinema-detail-outer-wrapper">
                                    <div class="cinema-detail-wrapper">
                                        <p class="bold">Now showing at SAVOY Theatre - C2</p>
                                        <ul>
                                            <li>Dolby Atmos 4K Digital Project</li>
                                        </ul>
                                    </div>
                                    <div class="flex items-center buy-btn">
                                        <button class="btn btn-warning" onclick="location.href='tickets.html'">Buy Tickets</button>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="carousel-item">
                <img src="images/movie5.jpg" class="d-block w-100" alt="Movie 5">
                <div class="carousel-caption d-none d-md-block">
                    <div class="carousel-content">
                        <img src="images/movie5-small.jpg" alt="Movie 5 Small" class="carousel-small-image">
                        <div class="carousel-description">
                            <h3>Twisters</h3>
                            <p>As storm season intensifies, the paths of former storm chaser Kate Cooper and reckless social-media superstar Tyler Owens collide when terrifying phenomena never seen before are unleashed. The pair and their competing teams find themselves squarely in the paths of multiple storm systems converging over central Oklahoma in the fight of their lives.</p>
                            <div class="genres">
                                <span class="badge badge-light">Action</span>
                                <span class="badge badge-light">Thriller</span>
                                <span class="badge badge-light">Adventure</span>
                            </div>
                            <p>PG . 2h 20m</p>
                            <!-- <div class="now-showing-box">
                                <span>Now showing at SAVOY Theatre - C2 Dolby Atmos 4K Digital Project</span>
                                <button class="btn btn-warning">Buy Tickets</button>
                            </div> -->
                            <div class="movie-detail-slide-styled__CinemaDetailContentStyled-sc-1it8vly-2 CgBVX">
                                <div class="cinema-detail-outer-wrapper">
                                    <div class="cinema-detail-wrapper">
                                        <p class="bold">Now showing at SAVOY Theatre - C2</p>
                                        <ul>
                                            <li>Dolby Atmos 4K Digital Project</li>
                                        </ul>
                                    </div>
                                    <div class="flex items-center buy-btn">
                                        <button class="btn btn-warning" onclick="location.href='tickets.html'">Buy Tickets</button>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        
        <a class="carousel-control-prev" href="#movieCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#movieCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

 <!-- Movies List Section -->
 <section class="movies-section">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h2>Now Showing</h2>
            </div>
        </div>
        <div class="row" id="now-showing-movies">
            <!-- Movies will be populated here by JavaScript -->
        </div>

        <div class="coming-soon-section">
            <div class="row mt-5">
                <div class="col-12">
                    <h2>Coming Soon</h2>
                </div>
            </div>
            <div class="row" id="coming-soon-movies">
                <!-- Movies will be populated here by JavaScript -->
            </div>
        </div>
    </div>
</section>

    
<!-- Cinema Section -->
<section class="cinema-section">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="cinema-card cinema-c1">
                    <div class="cinema-label-box cinema-label-c1">C1</div>
                    <div class="cinema-details">
                        <h3>SAVOY</h3>
                        <ul>
                            <li>Dolby Atmos</li>
                            <li>4K Digital Projection</li>
                            
                        </ul>
                        <button class="btn btn-warning" onclick="location.href='tickets.html'">View Showtime</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="cinema-card cinema-c2">
                    <div class="cinema-label-box cinema-label-c2">C2</div>
                    <div class="cinema-details">
                        <h3>SAVOY</h3>
                        <ul>
                            <li>Dolby 7.1 Sounds</li>
                            <li>2K Laser Projection</li>
                        </ul>
                        <button class="btn btn-warning" onclick="location.href='tickets.html'">View Showtime</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="cinema-card cinema-c3">
                    <div class="cinema-label-box cinema-label-c3">C3</div>
                    <div class="cinema-details">
                        <h3>SAVOY</h3>
                        <ul>
                            <li>Dolby 7.1 Sounds</li>
                            <li>2K Laser Projection</li>
                        </ul>
                        <button class="btn btn-warning" onclick="location.href='tickets.html'">View Showtime</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
    






    <!-- Footer -->
    <footer>
        <p>&copy; 2024 SAVOY Cinema. All rights reserved.</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('fetch_movies.php')
                .then(response => response.json())
                .then(movies => {
                    const nowShowingContainer = document.getElementById('now-showing-movies');
                    const comingSoonContainer = document.getElementById('coming-soon-movies');

                    movies.forEach(movie => {
                        const movieCard = `
                            <div class="col-md-4">
                                <div class="movie-card">
                                    <img src="${movie.image}" alt="${movie.title}" class="img-fluid">
                                    <h3>${movie.title}</h3>
                                    <div class="movie-buttons">
                                        ${movie.tickets_url ? `<button class="btn btn-warning" onclick="location.href='${movie.tickets_url}'">Buy Tickets</button>` : ''}
                                        <button class="btn btn-secondary" onclick="location.href='${movie.trailer_url}'">Watch Trailer</button>
                                    </div>
                                </div>
                            </div>
                        `;

                        if (movie.category === 'now_showing') {
                            nowShowingContainer.innerHTML += movieCard;
                        } else if (movie.category === 'coming_soon') {
                            comingSoonContainer.innerHTML += movieCard;
                        }
                    });
                });
        });
    </script>
</body>
</html>
